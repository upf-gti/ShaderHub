<script type="module">

    import { LX } from 'lexgui';

    const content = document.querySelector( '.lexdocs-content' );

    const header = LX.makeContainer([null, "200px"], "flex flex-col gap-2 text-center items-center place-content-center", `
        <span class="text-4xl font-medium text-card-foreground">Get started with ShaderHub</span>
    `, content);

    const headerButtons = LX.makeContainer(["auto", "auto"], "flex flex-row p-2", ``, header);
    const getStartedButton = new LX.Button(null, "Get Started", () => {}, { buttonClass: "primary lg" });
    headerButtons.appendChild(getStartedButton.root);

    const collapsibleClass = 'my-0 bg-accent/30 hover:bg-accent/50! rounded-xl border-color cursor-pointer [&_svg]:w-5! [&_svg]:h-5!';

    docMaker.header("Creating Shaders.", "h1", "creating-shaders");

    docMaker.paragraph(`ShaderHub lets you create and run shaders right in your browser using WebGPU. You can write code, plug in textures or uniforms, and instantly see the results on the canvas. No setup, no downloads, just shaders that run on the web.`);
    docMaker.paragraph(`To create a new shader, simply click on the "New" button in the top menu bar. This will open a new shader editor where you can start coding your shader. The editor supports multiple passes, allowing you to create complex effects by layering different shaders together.
        Once you've written your shader code, you can compile and run it by clicking the "Run" button or using the ${LX.makeKbd(["Ctrl", "Space"], false, "text-base inline-block border-color px-1 rounded").innerHTML}/${LX.makeKbd(["Ctrl", "Enter"], false, "text-base inline-block border-color px-1 rounded").innerHTML} shortcuts.
        Once the shader is compiled, you will see the results in real-time on the canvas.` );

    docMaker.lineBreak();
    docMaker.header("Shader Passes.", "h2", "shader-passes", {
        collapsable: true, className: collapsibleClass, collapsed: true, collapsableContentCallback: () => {
            docMaker.root.classList.add('py-4');
            docMaker.paragraph(`ShaderHub supports multiple shader passes, which are essentially different stages of rendering that can be combined to create complex visual effects. There are 3 types of passes you can create:`);
            docMaker.bulletList([
                `<span class='font-bold underline underline-offset-4'>Buffers</span>: Offscreen render targets that can be used to store intermediate results. You can create up to four buffer passes, which can be referenced in subsequent passes using the iChannel uniforms (iChannel0, iChannel1, etc.). This allows you to build effects step by step, using the output of one pass as the input for another.`,
                `<span class='font-bold underline underline-offset-4'>Compute</span>: A compute pass that runs independently of the render pipeline and writes directly to buffers or textures. This is useful for general-purpose GPU computations such as simulations, particle updates, procedural data generation, or precomputing values that will later be used by render or buffer passes.`,
                `<span class='font-bold underline underline-offset-4'>Common</span>: Used for shared code that can be included in other passes. This is useful for defining functions or variables that you want to reuse across multiple shader passes. You can only have one Common pass per shader.`
            ]);
            docMaker.paragraph(`To create a new pass, click on the "+" button in the editor's tab bar and select the type of pass you want to create. You can then write your shader code in the new tab that appears.`);
        }
    });

    docMaker.header("Uniforms, Textures and Sounds.", "h2", "uniforms", {
        collapsable: true, className: collapsibleClass, collapsed: true, collapsableContentCallback: () => {
            docMaker.root.classList.add('py-4');
            docMaker.paragraph(`Uniforms are global variables that can be passed to your shader code. ShaderHub provides a set of default uniforms, such as <span class='font-bold'>iTime</span> (elapsed time), <span class='font-bold'>iResolution</span> (canvas resolution), and <span class='font-bold'>iMouse</span> (mouse position), which you can use to create dynamic effects.
                In addition to the default uniforms, you can also create custom uniforms to pass additional data to your shaders. To add a custom uniform, first open the Custom Uniforms popover using the button at the status bar (bottom of the editor), then click on the "+" button. You can specify the name and type of the uniform, and it will be available for use in your shader code.` );
            docMaker.lineBreak();
            docMaker.paragraph(`Textures and Sounds can be used in your shaders by assigning them to the iChannel uniforms. You must use existing assets from the ShaderHub library. To assign texture/sounds to an iChannel, click on the corresponding channel in the status bar and select the asset you want to use.`);
        }
    });

    docMaker.header("Saving and Sharing Shaders.", "h2", "saving-and-sharing-shaders", {
        collapsable: true, className: collapsibleClass, collapsed: true, collapsableContentCallback: () => {
            docMaker.root.classList.add('py-4');
            docMaker.paragraph(`Once you've created a shader that you're happy with, you can save it to your ShaderHub account by clicking the "Save" button in the shader options menu. If your shader is public, it will be visible to everyone.
                You can also share your shaders with others by providing them with a direct link. Simply copy the URL from your browser's address bar and send it to anyone you want to share your shader with. They will be able to view, edit and run your shader in their own browser (not save it!).` );
            docMaker.lineBreak();
            docMaker.paragraph(`If you want to allow others to remix your shader, you can enable the remix option in the shader settings. This will let other users create their own versions of your shader while still giving you credit as the original author.`);
        }
    });

    docMaker.header("Source Code.", "h1", "source-code");

    docMaker.paragraph(`ShaderHub is an open-source project, and its source code is available on GitHub. You can find the repository <a class='underline underline-offset-4' href="https://github.com/upf-gti/ShaderHub">here</a>.`);

</script>